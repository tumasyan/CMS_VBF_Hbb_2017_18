#include "TStyle.h"
#include "TGaxis.h"
#include "TRandom.h"

#include <iostream>
#include <math.h>
#include <TF1.h>
#include <TH1D.h>
#include "TCanvas.h"

//double rew[]={0,0.00137714,0.175583,0.176614,0.240621,0.12205,0.219626,0.163821,0.12059,0.168279,1.08045,1.75815,2.14515,1.99374,1.65538,1.08036,0.827223,0.734306,0.763496,0.733524,0.725106,0.702037,0.720539,0.758901,0.788013,0.779858,0.738295,0.71627,0.710167,0.689311,0.705671,0.705332,0.709753,0.719683,0.711063,0.737763,0.751315,0.792437,0.855858,0.922826,0.944364,1.0897,1.20121,1.45254,1.79409,2.29608,2.78915,3.33359,3.47341,3.47066,3.40416,2.97055,2.70488,2.14745,1.64201,1.28599,0.878896,0.618772,0.410641,0.286186,0.203391,0.128493,0.091174,0.0667528,0.0440391,0.0307842,0.0196197,0.0127425,0.00861981,0.00597831,0.00431202,0.00274528,0.00140317,0.00105972,0.000596828,0.000330391,0.000300159,0.000102128,0.000107063,2.89811e-05,7.61401e-06,2.47344e-06,1.92642e-06,7.74473e-07,2.25816e-07,1.57773e-07,2.25153e-07,4.71867e-08,1.61435e-08,5.41218e-09,4.44742e-09,0,0,0,0,0,0,0,0,0};
double rew[]={0,0.798126,18.1207,14.7655,8.96119,2.78256,2.39094,1.80281,1.18334,0.866385,4.50645,5.11604,4.87425,3.63377,2.3087,1.48188,1.03325,0.838923,0.773768,0.741412,0.698234,0.670365,0.687718,0.725647,0.740976,0.720316,0.684778,0.656715,0.639069,0.638062,0.63056,0.628136,0.624424,0.625472,0.628517,0.640495,0.668228,0.711752,0.768685,0.811498,0.860919,0.969558,1.12861,1.35588,1.66454,2.05542,2.50623,2.96154,3.21858,3.36422,3.26354,3.01841,2.63201,2.18626,1.7381,1.3301,0.963607,0.681615,0.465635,0.319755,0.220719,0.153924,0.108758,0.0779425,0.0566201,0.0416081,0.0263959,0.016734,0.0121966,0.00889823,0.00647328,0.00467944,0.00335151,0.00237284,0.00165781,0.000908819,0.000508386,0.000337097,0.000219905,0.000141031,8.88541e-05,5.49556e-05,3.33457e-05,1.98403e-05,9.02122e-06,4.21836e-06,2.36058e-06,1.29579e-06,6.98202e-07,3.69623e-07,1.92468e-07,9.87022e-08,4.99156e-08,1.91257e-08,7.61235e-09,3.69361e-09,1.77501e-09,8.43189e-10,3.99759e-10,1.83632e-10};
void Compare()
{
  gStyle->SetOptFile(0);
  gStyle->SetOptStat(0);

//  TFile* f1 = new TFile("PUSPEC.root");
  TFile* f1 = new TFile("PileupMC.root");
  TFile* f2 = new TFile("MyDataPileupHistogram.root");
//  TH1D * histo1 = (TH1D*)f1->Get("PUMC");
  TH1D * histo1 = (TH1D*)f1->Get("input_Event/N_TrueInteractions");
  TH1D * histo2 = (TH1D*)f2->Get("pileup");

  cout<<histo1->GetSumOfWeights()<<endl;
  cout<<histo2->GetSumOfWeights()<<endl;

  TH1D * _NhistoM = new TH1D("NhistoM","NhistoM",100,0,100);
  TH1D * _NhistoD = new TH1D("NhistoD","NhistoD",100,0,100);

  for(int i=1;i<=100;i++)
   {
    if(i<=-10 || i>=600)
    {
     _NhistoM->SetBinContent(i,0);
     _NhistoD->SetBinContent(i,0);
    } 
    else
    {
     _NhistoM->SetBinContent(i,histo1->GetBinContent(i)*rew[i]);
//     _NhistoM->SetBinContent(i,histo1->GetBinContent(i));
     _NhistoD->SetBinContent(i,histo2->GetBinContent(i));
    }
   }

  _NhistoM->Scale(1/_NhistoM->GetSumOfWeights());
  _NhistoD->Scale(1/_NhistoD->GetSumOfWeights());

  _NhistoD->Draw("HIST same");
  _NhistoM->Draw("HIST same");

  for(int i=0;i<100;i++)
//    cout<<histo2->GetBinContent(i+1)/histo1->GetBinContent(i+1)<<",";
    cout<<_NhistoD->GetBinContent(i)/_NhistoM->GetBinContent(i)<<",";
  cout<<endl;

}